!function($){"object"==typeof exports&&require("imagesloaded");var UniformThumbs=function($ele,settings){this.$ele=$ele,this.settings=settings,this.formater=new UniformThumbsFormater(this.$ele,this.settings),this.fitter=new UniformThumbsFitter(this.$ele,this.settings),this.imageLoaded=imagesLoaded(this.$ele),this.addEventHandlers(),this.hideImages()};UniformThumbs.prototype.addEventHandlers=function(){var self=this;this.imageLoaded.on("done",function(){self.formater.setImageFormat(),self.fitter.setImageFit(),self.showImages(),self.$ele.trigger("ut_imageLoaded")});var didResize=!1;$(window).resize(function(){didResize=!0}),setInterval(function(){didResize&&(didResize=!1,self.formater.setImageFormat(),self.fitter.setImageFit())},250)},UniformThumbs.prototype.hideImages=function(){this.$ele.css({opacity:0,overflow:"hidden"})},UniformThumbs.prototype.showImages=function(){this.$ele.fadeTo(900,1)};var UniformThumbsFormater=function($wrapper,settings){this.$wrapper=$wrapper,this.settings=settings,this.ratio=this.getRatio()};UniformThumbsFormater.prototype.setImageFormat=function(){var widthRatio=this.$wrapper.width()/this.ratio.width,heightRatio=widthRatio*this.ratio.height;this.$wrapper.height(heightRatio)},UniformThumbsFormater.prototype.getRatio=function(){var ratioStr=this._getRatioString();return this._getRatioFromString(ratioStr)},UniformThumbsFormater.prototype._getRatioString=function(){switch(this.settings.format){case"square":return"1:1";case"landscape":return this.settings.landscapeRatio;case"portrait":return this.settings.portraitRatio;default:return this.settings.ratio}},UniformThumbsFormater.prototype._getRatioFromString=function(ratioStr){var ratioArr=ratioStr.split(":");return{width:ratioArr[0],height:ratioArr[1]}};var UniformThumbsFitter=function($wrapper,settings){this.$wrapper=$wrapper,this.$image=this.$wrapper.find("img"),this.settings=settings};UniformThumbsFitter.prototype.setImageFit=function(){switch(this._resetImageCSS(),this.settings.fit){case"crop":this._cropImage();break;case"scale":this._scaleImage()}this._alignImage()},UniformThumbsFitter.prototype._cropImage=function(){this._imageRatio()>this._wrapperRatio()?this._fitHorizontal():this._fitVertical()},UniformThumbsFitter.prototype._scaleImage=function(){this._imageRatio()>this._wrapperRatio()?this._fitVertical():this._fitHorizontal()},UniformThumbsFitter.prototype._fitHorizontal=function(){this._getNaturalHeight(this.$image)>=this.$wrapper.height()&&this.$image.height(this.$wrapper.height())},UniformThumbsFitter.prototype._fitVertical=function(){this._getNaturalWidth(this.$image)>=this.$wrapper.width()&&this.$image.width(this.$wrapper.width())},UniformThumbsFitter.prototype._imageRatio=function(){return this._getNaturalWidth(this.$image)/this._getNaturalHeight(this.$image)},UniformThumbsFitter.prototype._wrapperRatio=function(){return this.$wrapper.width()/this.$wrapper.height()},UniformThumbsFitter.prototype._alignImage=function(){var style={};switch(style.marginLeft=(this.$wrapper.width()-this.$image.width())/2,this.settings.align){case"top":break;case"middle":style.marginTop=(this.$wrapper.height()-this.$image.height())/2;break;case"bottom":style.marginTop=this.$wrapper.height()-this.$image.height()}this.$image.css(style)},UniformThumbsFitter.prototype._getNaturalHeight=function($image){return $image.prop("naturalHeight")?$image.prop("naturalHeight"):this._getNaturalSize($image).height},UniformThumbsFitter.prototype._getNaturalWidth=function($image){return $image.prop("naturalWidth")?$image.prop("naturalWidth"):this._getNaturalSize($image).width},UniformThumbsFitter.prototype._getNaturalSize=function($image){if($image.prop("src")){var img=new Image;return img.src=$image.prop("src"),{width:img.width,height:img.height}}return!1},UniformThumbsFitter.prototype._resetImageCSS=function(){this.$image.css({width:"auto",maxWidth:"none"})};var thumbnailCompleteCount=0,invokeFinalTrigger=function(self){thumbnailCompleteCount++,thumbnailCompleteCount===self.length&&$(self).last().trigger("ut_complete")};$.fn.uniform_thumbnails=function(options){var settings=$.extend({},$.fn.uniform_thumbnails.defaults,options),self=this;return self.each(function(){var $ele=$(this);$ele.data("_uniform_thumbnails",new UniformThumbs($ele,settings)),$ele.on("ut_imageLoaded",function(){invokeFinalTrigger(self)})})},$.fn.uniform_thumbnails.defaults={fit:"crop",ratio:"1:1",format:"ratio",align:"middle",landscapeRatio:"4:3",portraitRatio:"3:4"}}(jQuery),define("../src/jquery.uniform_thumbnails.js",function(){});